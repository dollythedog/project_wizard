# WARP.md

This file provides guidance to WARP (warp.dev) when working with code in this repository.

## Commands

### Installation & Setup
```bash
pip install -e .              # Install in editable mode
make install                  # Alternative installation command
```

### Running the Tool
```bash
project-wizard init           # Create new project with charter wizard
project-wizard init --type software_mvp   # Use specific project type
project-wizard plan           # Planning wizard (coming soon)
project-wizard sync           # OpenProject sync (coming soon)
make run                      # Alternative way to start wizard
```

### Development
```bash
pytest                        # Run tests
python -m pytest tests/ -v    # Run tests with verbose output
make test                     # Run tests via Makefile
ruff check app/               # Run linter
make clean                    # Clean build artifacts
```

### Utilities
```bash
make tree                     # Show project file structure
make version                  # Show current version
make status                   # Git status
```

## Architecture Overview

### Core Structure
Project Wizard is a CLI tool built on **Click** that guides users through formal project management phases. Currently implements Phase 1 (Initiation), with Phases 2-4 planned.

**Key Components:**
- **CLI Layer** (`app/main.py`) - Command routing using Click framework
- **Wizard Layer** (`app/wizard/`) - Interactive prompts using questionary + rich
- **Models** (`app/models/`) - Pydantic validation models
- **Services** (`app/services/`) - Document generation (Jinja2) and repository bootstrapping
- **Templates** (`app/templates/`) - Jinja2 templates for document generation

### Data Flow
1. User runs `project-wizard init`
2. `phase1_initiation.py` captures charter data interactively
3. Data validated through `CharterData` Pydantic model
4. `RepoBootstrapper` creates standardized folder structure
5. `DocumentGenerator` renders Jinja2 templates
6. Git repository initialized with initial commit
7. Charter data saved as JSON in `data/inbox/`

### Project Lifecycle
The tool implements a formal PM methodology in 4 phases:
- **Phase 1 (✅ Complete):** Charter creation wizard
- **Phase 2 (Planned):** Work breakdown and planning
- **Phase 3 (Planned):** OpenProject REST API integration
- **Phase 4 (Planned):** Docker deployment

### Standard Folder Structure Created
Projects generated by this tool follow this pattern:
```
project-name/
├── configs/              # Configuration files
├── data/
│   ├── inbox/           # Input data (includes charter.json)
│   ├── staging/         # Work in progress
│   ├── archive/         # Completed items
│   └── logs/            # Centralized application logs
├── scripts/utils/       # Shared utility scripts
├── docs/                # PROJECT_CHARTER.md, PROJECT_PLAN.md, etc.
├── CONTRIBUTING.md      # Coding standards and contribution guidelines
├── CODE_OF_CONDUCT.md   # Contributor Covenant v2.0
├── LICENSE.md           # MIT License
├── pyproject.toml       # Ruff/pytest/mypy configuration
└── .github/workflows/   # CI/CD workflows
```

## Development Guidelines

### Adding New Features
- **Phase 2:** Work on `app/wizard/phase2_planning.py` for planning wizard
- **Phase 3:** OpenProject client should go in `app/services/openproject_client.py`
- Use existing Pydantic models in `app/models/` or extend `charter.py`
- Add new Jinja2 templates to `app/templates/documents/`

### Template Development
- Templates are in `app/templates/documents/` with `.j2` extension
- `DocumentGenerator` uses Jinja2 with `trim_blocks=True` and `lstrip_blocks=True`
- Templates receive `charter_data.model_dump()` as context
- Currently only `PROJECT_CHARTER.md.j2` exists; add `PROJECT_PLAN.md.j2` for Phase 2

### Testing Strategy
- Unit tests for model validation (Pydantic)
- Integration tests for end-to-end charter creation
- Test generated documents for correct formatting
- When OpenProject integration is added, test API calls

### Dependency Management
Core dependencies:
- **click** - CLI framework
- **jinja2** - Template engine
- **pydantic** (v2.0+) - Data validation
- **rich** - Console formatting
- **questionary** - Interactive prompts
- **gitpython** - Git operations
- **requests** - HTTP client (for future OpenProject integration)

Version is set in `setup.py` (currently 0.1.0)

## Important Files

- **app/main.py** - CLI entry point, defines all commands
- **app/wizard/phase1_initiation.py** - Charter wizard with 20+ prompts
- **app/models/charter.py** - CharterData and ProjectMetadata models
- **app/services/document_generator.py** - Jinja2 template rendering
- **app/services/repo_bootstrapper.py** - Folder structure and git init
- **PROJECT_PLAN.md** - Technical roadmap and architecture decisions
- **ISSUES.md** - Local issue tracking (syncs to GitHub/OpenProject later)

## OpenProject Integration (Future)
Phase 3 will add REST API integration:
- Reference implementation exists in `patio-drainage-project` (mentioned in docs)
- Should create `OpenProjectClient` service
- Store OpenProject IDs in `charter.json`
- Support bidirectional sync with `ISSUES.md`

## Windows Development Notes
This tool is developed on Windows with PowerShell:
- Makefile commands use Linux-style syntax but work via WSL or Git Bash
- Git operations use subprocess calls
- Docker deployment will target both Ubuntu (home) and Windows (office) servers
- Use `tree /F /A` on Windows instead of `tree -L 2` for directory listings

## Versioning
Uses semantic versioning (X.Y.Z):
- **Major (X.0.0):** Breaking changes, major feature release
- **Minor (0.X.0):** New features, non-breaking changes  
- **Patch (0.0.X):** Bug fixes, minor improvements

Current version: **0.3.0** (Phase 2 + Best Practices complete)

## Best Practices Integration

### Code Quality Standards
- **PEP-8 Compliance**: All generated projects include pyproject.toml with ruff configuration
- **Complexity Limits**: Maximum cyclomatic complexity set to 10
- **Linting**: Enabled rules for pycodestyle, pyflakes, isort, pep8-naming, pyupgrade, bugbear, comprehensions, and simplify
- **Testing**: pytest configuration included for all projects

### Documentation Standards
- **CONTRIBUTING.md**: Generated with PEP-8 guidelines, docstring examples (Google style), commit conventions (Conventional Commits)
- **CODE_OF_CONDUCT.md**: Contributor Covenant v2.0
- **LICENSE.md**: MIT License template with copyright year
- Links to:
  - [PEP-8 Style Guide](https://peps.python.org/pep-0008/)
  - [Google Python Style Guide](https://google.github.io/styleguide/pyguide.html)
  - [Google Documentation Best Practices](https://google.github.io/styleguide/docguide/best_practices.html)
  - [Agile Documentation](https://agilemodeling.com/essays/agileDocumentationBestPractices.htm)

### Logging Standards
- Centralized logging in `data/logs/` directory
- log_utils.py defaults to `data/logs/{script_name}.log`
- .gitignore configured to exclude log files but preserve directory structure

### Security Standards
- HIPAA compliance reminders for healthcare/clinical projects
- Never log PHI (Protected Health Information)
- Environment variables for sensitive configuration
- Secrets management best practices in CONTRIBUTING.md
