# Project Wizard v3.0 ğŸš€

**Pattern-Based Document Generation with Full Project Context**

## What's New in v3.0

### ğŸ¯ Core Innovation: Universal Document Platform

V3.0 transforms Project Wizard from a charter-only tool to a **complete LEAN/PM document generation platform**:

- âœ… **5W1H Analysis** - Problem definition
- âœ… **SIPOC** (coming) - Process overview  
- âœ… **Fishbone** (coming) - Root cause analysis
- âœ… **VOC** (coming) - Voice of customer
- âœ… **Add any LEAN/PM methodology** in 30 minutes!

### ğŸ”— Project Context Integration

**Game-changing feature**: All generated documents automatically reference your project's core documentation:

- `PROJECT_CHARTER.md` - Project goals & scope
- `README.md` - Project overview
- `ISSUES.md` - Current tasks & priorities  
- `CHANGELOG.md` - Project history

This ensures **every document stays aligned** with your project strategy!

### ğŸ—ï¸ Fabric-Inspired Architecture

Based on [Fabric's](https://github.com/danielmiessler/fabric) successful pattern system (233+ prompts):

```
User Input â†’ [Draft Agent] â†’ [Editor Agent] â†’ [Critic Agent] â†’ Output
                                                  â†“
                                          [Revision Loop]
```

### ğŸ”„ Cross-Document Referencing (Future)

Eventually reference one document while creating another:
- Use SIPOC context while generating VSM
- Reference 5W1H analysis in Fishbone diagram
- Build interconnected documentation

## Quick Start

### Launch v3.0

```bash
# Option 1: Launch script
./run_v3.sh

# Option 2: Manual
source venv/bin/activate
streamlit run app_v3.py --server.port 8503
```

Access at: **http://localhost:8503**

### Workflow

1. **Select Project** (Sidebar)
   - Choose from recent projects
   - Or enter project path
   - System loads charter, readme, issues, changelog

2. **Choose LEAN Activity** (Tab 2)
   - Select from available patterns
   - Currently: 5W1H Analysis

3. **Fill Dynamic Form**
   - Form auto-generates from pattern definition
   - Helpful placeholders and examples
   - Required fields marked with *

4. **Configure Generation**
   - Enable/disable AI editing
   - Enable/disable quality critique
   - Set max revision iterations

5. **Generate & Review**
   - Pipeline executes (30-60 seconds)
   - View generated document
   - Review quality scores
   - Download markdown

## Architecture

### Pattern Structure

Each LEAN methodology is a self-contained pattern:

```
patterns/5w1h_analysis/
â”œâ”€â”€ system.md         # AI instructions (what to generate)
â”œâ”€â”€ user.md           # Context template (with {{variables}})
â”œâ”€â”€ variables.json    # UI field definitions
â”œâ”€â”€ rubric.json       # Quality criteria
â””â”€â”€ template.md.j2    # Output document format
```

### Specialized Agents

**Draft Agent**: Creates initial content
- Temperature: 0.3
- Focuses on comprehensive first draft

**Editor Agent**: Polishes without hallucinating
- Temperature: 0.2
- NEVER invents facts or metrics
- Only improves clarity & structure

**Critic Agent**: Evaluates quality
- Scores against rubric
- Triggers revision if score < threshold
- Provides actionable feedback

### Services

- **PatternRegistry**: Discovers and loads patterns automatically
- **ProjectContext**: Injects project documentation into prompts
- **PatternPipeline**: Orchestrates multi-agent workflow

## Adding New Patterns

Want to add SIPOC, Fishbone, or custom methodology?

### 1. Create Pattern Directory

```bash
mkdir -p patterns/sipoc
cd patterns/sipoc
```

### 2. Create 5 Required Files

**system.md** - AI behavior instructions
```markdown
# IDENTITY and PURPOSE
You are a LEAN expert in SIPOC analysis...

# CONSTRAINTS
- NEVER invent data
- Preserve user facts exactly
...
```

**user.md** - Context template
```markdown
## SIPOC Inputs

**Suppliers:** {{suppliers}}
**Inputs:** {{inputs}}
...

## Project Context
{{project_charter}}
{{project_readme}}
...
```

**variables.json** - UI fields
```json
{
  "suppliers": {
    "type": "textarea",
    "label": "Suppliers",
    "help": "Who provides inputs?",
    "required": true
  },
  ...
}
```

**rubric.json** - Quality criteria
```json
{
  "criteria": [
    {
      "name": "Completeness",
      "weight": 0.30,
      "description": "All SIPOC elements addressed"
    },
    ...
  ],
  "threshold": 0.75
}
```

**template.md.j2** - Output format
```jinja2
# SIPOC Analysis

**Created:** {{ created_date }}
**Project:** {{ project_name }}

{{ content }}

---
*Generated by Project Wizard*
```

### 3. Restart App

Pattern auto-discovered! No code changes needed.

## Features

### âœ… Already Working

- Project selector with recent projects
- Dynamic form generation from `variables.json`
- Full pipeline execution (draft â†’ edit â†’ critique)
- Quality scoring with detailed feedback
- Document download
- Project dashboard
- 5W1H pattern fully functional

### ğŸš§ Coming in v3.1

- SIPOC pattern
- Fishbone diagram pattern
- VOC (Voice of Customer) pattern
- Process mapping
- Cross-document referencing
- Pattern-specific document storage

### ğŸ”® Future (v3.2+)

- Visual diagram generation (Mermaid)
- Batch processing (run on multiple projects)
- Pattern marketplace/sharing
- Custom pattern editor UI
- Export to PDF/PowerPoint
- OpenProject bidirectional sync

## Configuration

### Pattern Directory

Default: `./patterns/`

To use custom directory:
```python
registry = PatternRegistry(patterns_dir='/custom/path')
```

### Project Context

System automatically loads these files from project root:
- `PROJECT_CHARTER.md`
- `README.md`
- `ISSUES.md`
- `CHANGELOG.md`

Missing files gracefully handled with `[not found]` placeholders.

### AI Settings

Uses existing OpenAI configuration from `.env`:
```bash
OPENAI_API_KEY=sk-...
```

Models:
- Draft: gpt-4o-mini (temperature 0.3)
- Editor: gpt-4o-mini (temperature 0.2)
- Critic: gpt-4o-mini (temperature 0.2)

## Testing

### Test Pattern System

```bash
# Test pattern loading
python -c "from app.services.pattern_registry import PatternRegistry; r = PatternRegistry(); print(r.list_patterns())"

# Test full pipeline
python test_5w1h_pipeline.py
```

### Test Streamlit UI

1. Launch app: `./run_v3.sh`
2. Select project from sidebar
3. Go to "LEAN Activities" tab
4. Fill in 5W1H form
5. Generate document
6. Verify output quality

## Cost Estimation

**Per Document (5W1H with editing + critique)**:
- Draft: ~1,500 tokens
- Edit: ~1,800 tokens  
- Critique: ~2,000 tokens
- Revision (if needed): ~1,800 tokens

**Total**: ~$0.01-0.02 per document (gpt-4o-mini)

**Monthly (50 documents)**: ~$0.50-1.00

Extremely cost-effective!

## Troubleshooting

### "Pattern not found"

Check patterns directory exists:
```bash
ls -la patterns/
```

### "Project context failed to load"

Verify project path is correct:
```bash
ls /path/to/project/PROJECT_CHARTER.md
```

### "OpenAI API error"

Check `.env` file:
```bash
cat .env | grep OPENAI_API_KEY
```

### UI not updating

Clear Streamlit cache:
```bash
# In browser, press 'C' key
# Or restart: Ctrl+C then ./run_v3.sh
```

## File Structure

```
project_wizard/
â”œâ”€â”€ app_v3.py                    # NEW: Streamlit v3 app
â”œâ”€â”€ run_v3.sh                    # NEW: Launch script
â”‚
â”œâ”€â”€ patterns/                    # NEW: Pattern definitions
â”‚   â””â”€â”€ 5w1h_analysis/
â”‚       â”œâ”€â”€ system.md
â”‚       â”œâ”€â”€ user.md
â”‚       â”œâ”€â”€ variables.json
â”‚       â”œâ”€â”€ rubric.json
â”‚       â””â”€â”€ template.md.j2
â”‚
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ pattern_registry.py      # NEW
â”‚   â”‚   â”œâ”€â”€ project_context.py       # NEW  
â”‚   â”‚   â”œâ”€â”€ pattern_pipeline.py      # NEW
â”‚   â”‚   â””â”€â”€ ai_agents/
â”‚   â”‚       â”œâ”€â”€ draft_agent.py       # NEW
â”‚   â”‚       â”œâ”€â”€ editor_agent.py      # NEW
â”‚   â”‚       â””â”€â”€ critic_agent.py      # Existing
â”‚   â”‚
â”‚   â””â”€â”€ ui/                          # NEW
â”‚       â”œâ”€â”€ project_selector.py
â”‚       â””â”€â”€ pattern_form.py
â”‚
â”œâ”€â”€ app_streamlit_v2.py          # Legacy v2.0
â”œâ”€â”€ test_5w1h_pipeline.py        # NEW: Integration test
â”‚
â””â”€â”€ docs/
    â”œâ”€â”€ SESSION_SUMMARY.md
    â”œâ”€â”€ PATTERN_SYSTEM_README.md
    â””â”€â”€ V3_README.md             # This file
```

## Comparison: v2.0 vs v3.0

| Feature | v2.0 | v3.0 |
|---------|------|------|
| Charter Generation | âœ… | âœ… |
| LEAN Activities | âŒ | âœ… (5W1H, more coming) |
| Project Context | âŒ | âœ… Automatic injection |
| Dynamic Forms | âŒ | âœ… From variables.json |
| Specialized Agents | âŒ | âœ… Draft/Edit/Critique |
| Quality Rubrics | âœ… Charter only | âœ… Per pattern |
| Pattern Management | âŒ | âœ… Auto-discovery |
| Extensibility | Hard-coded | Data-driven (30 min/pattern) |
| Cross-referencing | âŒ | ğŸš§ Coming v3.1 |

## Philosophy

### Unix Principles

- **Do one thing well**: Each agent has single responsibility
- **Composability**: Pipe agents together
- **Text streams**: Markdown in, markdown out

### ADHD-Friendly

- **Guided inputs**: No blank page paralysis
- **Project context**: Maintains focus
- **Immediate feedback**: Quality scores
- **Single workspace**: No tool switching

### Anti-Hallucination

- **Editor constraints**: NEVER invent data
- **Fact preservation**: All user input retained
- **Explicit gaps**: Note missing info vs fabricating

## Credits

- **Fabric**: Inspiration for pattern architecture
- **LEAN Six Sigma**: Methodology frameworks
- **OpenAI**: AI capabilities
- **Streamlit**: Rapid UI development

## License

MIT License - See existing project license

## Support

**Documentation**:
- `PATTERN_SYSTEM_README.md` - Architecture details
- `SESSION_SUMMARY.md` - Development notes
- `V3_README.md` - This file

**Testing**:
- `test_5w1h_pipeline.py` - Backend test
- Access UI at http://localhost:8503

**Issues**:
- See `ISSUES.md` for known issues
- Report bugs via GitHub

---

**Version**: 3.0.0  
**Status**: âœ… MVP Complete - 5W1H Functional  
**Next**: Add SIPOC, Fishbone, VOC patterns  

**Ready to use!** ğŸš€

*Built with â¤ï¸ for project managers with ADHD*
